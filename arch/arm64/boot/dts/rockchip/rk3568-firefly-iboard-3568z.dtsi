// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
/*
 * Copyright (c) 2020 Rockchip Electronics Co., Ltd.
 *
 */

#include "rk3568-firefly-port.dtsi"

/ {

	vcc_hub_power: vcc-hub-power-regulator {
		compatible = "regulator-fixed";
		enable-active-high;
		gpio = <&gpio1 RK_PB0 GPIO_ACTIVE_HIGH>;
		pinctrl-names = "default";
		pinctrl-0 = <&vcc_hub_power_en>;
		regulator-name = "vcc_hub_power_en";
		regulator-always-on;
	};

	vcc_hub_reset: vcc-hub-reset-regulator {
		compatible = "regulator-fixed";
		enable-active-high;
		gpio = <&gpio1 RK_PA4 GPIO_ACTIVE_HIGH>;
		pinctrl-names = "default";
		pinctrl-0 = <&vcc_hub_reset_en>;
		regulator-name = "vcc_hub_reset_en";
		regulator-always-on;
	};

    pcie_pi6c_oe: pcie-pi6c-oe-regulator {
		compatible = "regulator-fixed";
		enable-active-high;
		gpio = <&gpio0 RK_PB7 GPIO_ACTIVE_HIGH>;
		pinctrl-names = "default";
		pinctrl-0 = <&pcie_pi6c_oe_en>;
		regulator-name = "pcie_pi6c_oe_en";
		regulator-always-on;
	};

    vcc_4g_power: vcc-4g-power-regulator {
        compatible = "regulator-fixed";
        enable-active-high;
        gpio = <&gpio0 RK_PB0 GPIO_ACTIVE_HIGH>;
        pinctrl-names = "default";
        pinctrl-0 = <&vcc_4g_power_en>;
        regulator-name = "vcc_4g_power_en";
        regulator-always-on;
    };

    tp_power: tp-power-regulator {
		compatible = "regulator-fixed";
		enable-active-high;
		gpio = <&gpio3 RK_PA4 GPIO_ACTIVE_HIGH>;
		pinctrl-names = "default";
		pinctrl-0 = <&tp_power_en>;
		regulator-name = "tp_power_en";
		regulator-always-on;
    };

    gps_reset: gps-reset-regulator {
		compatible = "regulator-fixed";
		//enable-active-high;
		gpio = <&gpio3 RK_PC1 GPIO_ACTIVE_LOW>;
		pinctrl-names = "default";
		pinctrl-0 = <&gps_reset_en>;
		regulator-name = "gps_reset_en";
		regulator-always-on;
    };

    firefly_leds: leds {
		status = "okay";
		compatible = "gpio-leds";

		power_led: power {
			label = "firefly:blue:power";
			linux,default-trigger = "ir-power-click";
			default-state = "on";
			gpios = <&gpio3 RK_PA7 GPIO_ACTIVE_HIGH>;
			pinctrl-names = "default";
			pinctrl-0 = <&led_power>;
		};

		user_led: user {
			label = "firefly:yellow:user";
			linux,default-trigger = "ir-user-click";
			default-state = "off";
			gpios = <&gpio3 RK_PB0 GPIO_ACTIVE_HIGH>;
			pinctrl-names = "default";
			pinctrl-0 = <&led_user>;
		};

		diy2_led: diy2 {
			label = "firefly:diy2:user";
			linux,default-trigger = "ir-user-click";
			default-state = "off";
			gpios = <&gpio3 RK_PA1 GPIO_ACTIVE_HIGH>;
			pinctrl-names = "default";
			pinctrl-0 = <&led_diy2>;
		};

		fan_ctl: fan-ctl {
			label = "firefly:fan_ctl:user";
			linux,default-trigger = "ir-user-click";
			default-state = "on";
			gpios = <&gpio3 RK_PA2 GPIO_ACTIVE_HIGH>;
			pinctrl-names = "default";
			pinctrl-0 = <&fan_user>;
		};
    };

    test-power {
        status = "okay";
    };

	fiq-debugger {
		rockchip,baudrate = <115200>;  /* Only 115200 and 1500000 */
		status = "okay";
	};
};

&i2c1 {
    status = "okay";

    cw2015: cw2015@62 {
        status = "okay";
        compatible = "cw201x";
        reg = <0x62>;
        dc_det_gpio = <&gpio3 RK_PB6 GPIO_ACTIVE_LOW>;
        //bat_low_gpio = <&gpio8 GPIO_A7 GPIO_ACTIVE_LOW>;
        //chg_ok_gpio = <&gpio7 GPIO_B4 GPIO_ACTIVE_HIGH>;
        bat_config_info = <0x15 0x7A 0x55 0x55 0x50 0x43 0x73 0x4B
                           0x46 0x54 0x4E 0x43 0x3B 0x34 0x2E 0x2B
                           0x28 0x27 0x28 0x31 0x3D 0x44 0x48 0x1E
                           0x14 0x98 0x0A 0x3E 0x41 0x62 0x84 0x80
                           0x88 0x8B 0x85 0x84 0x48 0x20 0x40 0x48
                           0x22 0x43 0x52 0x87 0x8F 0x91 0x94 0x52
                           0x82 0x8C 0x92 0x96 0x76 0xBD 0xCA 0xCB
                           0x2F 0x7D 0x72 0xA5 0xB5 0xC1 0x64 0x31>;
        monitor_sec = <2>;
        virtual_power = <0>;
        //divider_res1 = <200>;
        //divider_res2 = <200>;
    };

};

&i2c5 {
	status = "okay";
};

&hym8563 {
	status = "okay";
};

&mc3230 {
	status = "okay";
};

&uart0 {
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&uart0_xfer &uart0_ctsn &uart0_rtsn>;
};

// gps
&uart3 {
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&uart3m1_xfer>;
};

&uart4 {
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&uart4m1_xfer>;
};

&uart5 {
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&uart5m1_xfer>;
};

&uart7 {
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&uart7m1_xfer>;
};

// bluetooth
&uart8 {
	status = "okay";
};

&uart9 {
	status = "okay";
	pinctrl-names = "default";
	pinctrl-0 = <&uart9m1_xfer>;
};

&pwm4 {
	status = "disabled";
};

&pwm5 {
	status = "disabled";
};

&pcie30phy {
	status = "okay";
};

&pcie3x2 {
	status = "okay";
	reset-gpios = <&gpio2 RK_PD6 GPIO_ACTIVE_HIGH>;
	/delete-property/ vpcie3v3-supply;
};

&its {
	status = "okay";
};

&can1 {
	status = "okay";
};

&can2 {
	status = "okay";
};

&gmac1 {
    status = "okay";
    tx_delay = <0x49>;
    rx_delay = <0x28>;
};

&sdio_pwrseq {
	status = "okay";
	reset-gpios = <&gpio3 RK_PD5 GPIO_ACTIVE_LOW>;
	post-power-on-delay-ms = <100>;
};

// wifi
&sdmmc2 {
	status = "okay";
};

&wireless_wlan {
	status = "okay";
	wifi_chip_type = "ap6256";
};

&wireless_bluetooth {
	status = "okay";
	BT,wake_gpio     = <&gpio0 RK_PC3 GPIO_ACTIVE_HIGH>;
	BT,wake_host_irq = <&gpio2 RK_PD7 GPIO_ACTIVE_HIGH>;
};

&spdif_8ch{
    status = "disabled";
};

&rk809_codec {
	spk-ctl = <&gpio0 RK_PA6 GPIO_ACTIVE_HIGH>;
	/delete-property/ hp-ctl-gpios;
	hp-det-adc-value = <900>;
	hp-adc-drift-scope = <200>;
};

&spk_ctl_gpio {
	rockchip,pins = <0 RK_PA6 RK_FUNC_GPIO &pcfg_pull_up>;
};

&rk809 {
	rtc {
		status = "disabled";
	};
};

&sata2 {
	status = "okay";
};

&dfi {
	status = "okay";
};

&dmc {
	status = "okay";
};

&u2phy0_host {
	/delete-property/ phy-supply;
};

&u2phy0_otg {
	/delete-property/ phy-supply;
};

&u2phy1_host {
	/delete-property/ phy-supply;
};

&u2phy1_otg {
	/delete-property/ phy-supply;
};

/delete-node/ &vcc5v0_host;
/delete-node/ &vcc3v3_vga;
/delete-node/ &vcc3v3_pcie;
/delete-node/ &vcc3v3_lcd1_n;

&pinctrl {

	usb {
		vcc_hub_power_en: vcc-hub-power-en {
			rockchip,pins = <1 RK_PB0 RK_FUNC_GPIO &pcfg_pull_none>;
		};

		vcc_hub_reset_en: vcc-hub-reset-en {
			rockchip,pins = <1 RK_PA4 RK_FUNC_GPIO &pcfg_pull_none>;
		};
	};

	pcie {
		pcie_pi6c_oe_en: pcie-pi6c-oe-en {
			rockchip,pins = <0 RK_PB7 RK_FUNC_GPIO &pcfg_pull_none>;
		};
	};

	4g {
		vcc_4g_power_en: vcc-4g-power-en {
	        rockchip,pins = <0 RK_PB0 RK_FUNC_GPIO &pcfg_pull_none>;
		};
	};

	leds {
		led_power: led-power {
	        rockchip,pins = <0 RK_PC0 RK_FUNC_GPIO &pcfg_pull_none>;
		};

		led_user: led-user {
			rockchip,pins = <3 RK_PB0 RK_FUNC_GPIO &pcfg_pull_none>;
		};

		led_diy2: led-diy2 {
		    rockchip,pins = <3 RK_PA1 RK_FUNC_GPIO &pcfg_pull_none>;
		};

		fan_user: fan-user {
			rockchip,pins = <3 RK_PA2 RK_FUNC_GPIO &pcfg_pull_none>;
		};
	};

	touchscreen {
		tp_power_en: tp-power-en {
			rockchip,pins = <3 RK_PA4 RK_FUNC_GPIO &pcfg_pull_none>;
		};
	};

	gps {
		gps_reset_en: gps-reset-en {
			rockchip,pins = <3 RK_PC1 RK_FUNC_GPIO &pcfg_pull_none>;
		};
	};
};
